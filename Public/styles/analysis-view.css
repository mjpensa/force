/**
 * Analysis View Styles
 * Glassmorphic styling for the Research Analysis screen
 *
 * Matches the Executive Summary screen's glassmorphic text box tile styling
 */

/* ========== MAIN CONTAINER ========== */

.research-analysis-view {
  padding: var(--spacing-4);
  max-width: 1200px;
  margin: 0 auto;
}

/* ========== HEADER ========== */

.analysis-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--spacing-8);
  padding: var(--spacing-6);
  /* Glassmorphic effect */
  background: var(--glass-white-8);
  backdrop-filter: blur(var(--blur-xl));
  -webkit-backdrop-filter: blur(var(--blur-xl));
  border: var(--border-glass);
  border-radius: var(--radius-glass-xl);
  box-shadow: var(--shadow-glass-2);
}

.analysis-title-section {
  flex: 1;
}

.analysis-title {
  font-size: var(--text-3xl);
  font-weight: var(--weight-semibold);
  color: var(--glass-text-primary);
  margin: 0 0 var(--spacing-2) 0;
}

.analysis-timestamp {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
}

.analysis-score-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-2);
}

.score-label {
  font-size: var(--text-sm);
  color: var(--glass-text-secondary);
}

/* ========== SCORE BADGES ========== */

.score-badge {
  display: flex;
  align-items: baseline;
  gap: 2px;
  padding: var(--spacing-2) var(--spacing-3);
  border-radius: var(--radius-glass-md);
  /* Glassmorphic effect */
  background: var(--glass-white-10);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: var(--border-glass);
}

.score-badge.size-large {
  padding: var(--spacing-3) var(--spacing-4);
}

.score-badge.size-large .score-value {
  font-size: var(--text-4xl);
}

.score-badge.size-small {
  padding: var(--spacing-1) var(--spacing-2);
}

.score-badge.size-small .score-value {
  font-size: var(--text-lg);
}

.score-value {
  font-size: var(--text-2xl);
  font-weight: var(--weight-bold);
  color: var(--glass-text-primary);
}

.score-max {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
}

/* Score color variants */
.score-badge.score-excellent {
  background: rgba(80, 175, 123, 0.20);
  border-color: rgba(80, 175, 123, 0.40);
}

.score-badge.score-good {
  background: rgba(132, 204, 22, 0.20);
  border-color: rgba(132, 204, 22, 0.40);
}

.score-badge.score-adequate {
  background: rgba(234, 179, 8, 0.20);
  border-color: rgba(234, 179, 8, 0.40);
}

.score-badge.score-poor {
  background: rgba(249, 115, 22, 0.20);
  border-color: rgba(249, 115, 22, 0.40);
}

.score-badge.score-inadequate {
  background: rgba(239, 68, 68, 0.20);
  border-color: rgba(239, 68, 68, 0.40);
}

/* ========== SECTION CONTAINERS (Glass Tiles) ========== */

.analysis-section {
  margin-bottom: var(--spacing-6);
  padding: var(--spacing-6);
  /* Glassmorphic effect */
  background: var(--glass-white-8);
  backdrop-filter: blur(var(--blur-xl));
  -webkit-backdrop-filter: blur(var(--blur-xl));
  border: var(--border-glass);
  border-radius: var(--radius-glass-xl);
  box-shadow: var(--shadow-glass-2);
  transition: all 0.2s ease;
}

.analysis-section:hover {
  background: var(--glass-white-10);
  box-shadow: var(--shadow-glass-3);
}

.section-title {
  font-size: var(--text-xl);
  font-weight: var(--weight-semibold);
  color: var(--glass-text-primary);
  margin: 0 0 var(--spacing-4) 0;
  padding-bottom: var(--spacing-3);
  border-bottom: var(--border-glass);
}

.subsection-title {
  font-size: var(--text-base);
  font-weight: var(--weight-medium);
  color: var(--glass-text-secondary);
  margin: var(--spacing-4) 0 var(--spacing-2) 0;
}

/* ========== SUMMARY SECTION ========== */

.summary-text {
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
  color: var(--glass-text-secondary);
  margin: 0 0 var(--spacing-4) 0;
}

.key-findings-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.key-findings-list li {
  position: relative;
  padding: var(--spacing-2) 0 var(--spacing-2) var(--spacing-6);
  color: var(--glass-text-secondary);
  font-size: var(--text-base);
  line-height: var(--leading-normal);
}

.key-findings-list li::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 8px;
  height: 8px;
  background: var(--color-glass-success);
  border-radius: 50%;
}

/* ========== GANTT READINESS SECTION ========== */

.readiness-verdict {
  display: flex;
  align-items: center;
  gap: var(--spacing-3);
  padding: var(--spacing-4);
  border-radius: var(--radius-glass-lg);
  margin-bottom: var(--spacing-4);
  /* Glassmorphic effect */
  background: var(--glass-white-6);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: var(--border-glass);
}

.readiness-verdict.verdict-ready {
  background: rgba(80, 175, 123, 0.15);
  border-color: rgba(80, 175, 123, 0.40);
}

.readiness-verdict.verdict-needs-improvement {
  background: rgba(234, 179, 8, 0.15);
  border-color: rgba(234, 179, 8, 0.40);
}

.readiness-verdict.verdict-insufficient {
  background: rgba(239, 68, 68, 0.15);
  border-color: rgba(239, 68, 68, 0.40);
}

.verdict-icon {
  font-size: var(--text-2xl);
}

.verdict-text {
  font-size: var(--text-lg);
  font-weight: var(--weight-medium);
  color: var(--glass-text-primary);
}

/* Stats Grid */
.readiness-stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--spacing-4);
}

@media (max-width: 640px) {
  .readiness-stats-grid {
    grid-template-columns: 1fr;
  }
}

/* ========== STAT CARDS (Glassmorphic) ========== */

.stat-card {
  padding: var(--spacing-4);
  text-align: center;
  /* Glassmorphic effect */
  background: var(--glass-white-8);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: 1px solid var(--glass-white-12);
  border-radius: var(--radius-glass-md);
  box-shadow: var(--shadow-glass-1);
  transition: all 0.2s ease;
}

.stat-card:hover {
  background: var(--glass-white-12);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glass-2);
}

.stat-card .stat-value {
  font-size: var(--text-2xl);
  font-weight: var(--weight-bold);
  color: var(--glass-text-primary);
  margin-bottom: var(--spacing-1);
}

.stat-card .stat-label {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
}

/* ========== CRITICAL GAPS ALERT ========== */

.critical-gaps-alert {
  padding: var(--spacing-4);
  /* Glassmorphic effect with warning tint */
  background: rgba(239, 68, 68, 0.10);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: 1px solid rgba(239, 68, 68, 0.30);
  border-radius: var(--radius-glass-lg);
}

.alert-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
  margin-bottom: var(--spacing-3);
}

.alert-icon {
  font-size: var(--text-xl);
}

.alert-title {
  font-size: var(--text-lg);
  font-weight: var(--weight-semibold);
  color: var(--glass-text-primary);
}

.gaps-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.gaps-list li {
  padding: var(--spacing-2) 0;
  padding-left: var(--spacing-6);
  color: var(--glass-text-secondary);
  position: relative;
}

.gaps-list li::before {
  content: '!';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  background: rgba(239, 68, 68, 0.30);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-xs);
  font-weight: var(--weight-bold);
  color: var(--glass-text-primary);
}

/* ========== THEME CARDS ========== */

.themes-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-3);
}

.theme-card {
  /* Glassmorphic effect */
  background: var(--glass-white-6);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: var(--border-glass);
  border-radius: var(--radius-glass-lg);
  overflow: hidden;
  transition: all 0.2s ease;
}

.theme-card:hover {
  background: var(--glass-white-8);
  border-color: var(--glass-white-25);
}

.theme-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: var(--spacing-4);
  background: transparent;
  border: none;
  cursor: pointer;
  color: var(--glass-text-primary);
  transition: all 0.2s ease;
}

.theme-card-header:hover {
  background: var(--glass-white-5);
}

.theme-header-left {
  display: flex;
  align-items: center;
  gap: var(--spacing-3);
}

.expand-icon {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
  transition: transform 0.2s ease;
}

.theme-name {
  font-size: var(--text-base);
  font-weight: var(--weight-medium);
}

.theme-header-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-3);
}

.inclusion-badge {
  font-size: var(--text-xs);
  padding: var(--spacing-1) var(--spacing-2);
  border-radius: var(--radius-glass-sm);
  font-weight: var(--weight-medium);
}

.inclusion-badge.included {
  background: rgba(80, 175, 123, 0.20);
  color: var(--color-glass-success);
  border: 1px solid rgba(80, 175, 123, 0.40);
}

.inclusion-badge.excluded {
  background: rgba(239, 68, 68, 0.15);
  color: #f87171;
  border: 1px solid rgba(239, 68, 68, 0.30);
}

/* Theme Card Content (Collapsible) */
.theme-card-content {
  padding: 0 var(--spacing-4) var(--spacing-4);
  max-height: 1000px;
  overflow: hidden;
  transition: all 0.3s ease;
}

.theme-card-content.collapsed {
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
}

.theme-description {
  color: var(--glass-text-secondary);
  font-size: var(--text-sm);
  line-height: var(--leading-relaxed);
  margin: 0 0 var(--spacing-4) 0;
}

.theme-stats-row {
  display: flex;
  gap: var(--spacing-4);
  flex-wrap: wrap;
  margin-bottom: var(--spacing-4);
  padding: var(--spacing-3);
  background: var(--glass-white-5);
  border-radius: var(--radius-glass-sm);
}

.theme-stats-row .stat {
  font-size: var(--text-sm);
  color: var(--glass-text-secondary);
}

.theme-stats-row .stat strong {
  color: var(--glass-text-primary);
}

/* List sections within theme cards */
.list-section {
  margin-bottom: var(--spacing-4);
}

.list-title {
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--glass-text-primary);
  margin: 0 0 var(--spacing-2) 0;
}

.list-items {
  list-style: none;
  margin: 0;
  padding: 0;
}

.list-items li {
  font-size: var(--text-sm);
  color: var(--glass-text-secondary);
  padding: var(--spacing-1) 0 var(--spacing-1) var(--spacing-4);
  position: relative;
}

.list-strengths .list-items li::before {
  content: '+';
  position: absolute;
  left: 0;
  color: var(--color-glass-success);
  font-weight: var(--weight-bold);
}

.list-gaps .list-items li::before {
  content: '-';
  position: absolute;
  left: 0;
  color: #f87171;
  font-weight: var(--weight-bold);
}

.list-recommendations .list-items li::before {
  content: '>';
  position: absolute;
  left: 0;
  color: var(--glass-text-muted);
  font-weight: var(--weight-bold);
}

/* ========== SAMPLE EVENTS TABLE ========== */

.sample-events-container {
  margin-top: var(--spacing-4);
}

.events-title {
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--glass-text-primary);
  margin: 0 0 var(--spacing-2) 0;
}

.sample-events-table {
  width: 100%;
  border-collapse: collapse;
  /* Glassmorphic effect */
  background: var(--glass-white-5);
  border-radius: var(--radius-glass-md);
  overflow: hidden;
}

.sample-events-table th,
.sample-events-table td {
  padding: var(--spacing-3);
  text-align: left;
  font-size: var(--text-sm);
  border-bottom: var(--border-glass);
}

.sample-events-table th {
  background: var(--glass-white-8);
  color: var(--glass-text-primary);
  font-weight: var(--weight-semibold);
}

.sample-events-table td {
  color: var(--glass-text-secondary);
}

.sample-events-table tr:last-child td {
  border-bottom: none;
}

.sample-events-table tr:hover td {
  background: var(--glass-white-5);
}

.quality-badge {
  display: inline-block;
  padding: var(--spacing-1) var(--spacing-2);
  border-radius: var(--radius-glass-sm);
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
}

.quality-badge.quality-specific,
.quality-badge.quality-excellent {
  background: rgba(80, 175, 123, 0.20);
  color: var(--color-glass-success);
}

.quality-badge.quality-approximate,
.quality-badge.quality-good {
  background: rgba(132, 204, 22, 0.20);
  color: #a3e635;
}

.quality-badge.quality-adequate {
  background: rgba(234, 179, 8, 0.20);
  color: #fbbf24;
}

.quality-badge.quality-vague,
.quality-badge.quality-poor {
  background: rgba(249, 115, 22, 0.20);
  color: #fb923c;
}

.quality-badge.quality-missing,
.quality-badge.quality-inadequate {
  background: rgba(239, 68, 68, 0.20);
  color: #f87171;
}

/* ========== DATA COMPLETENESS SECTION ========== */

.completeness-metrics-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-4);
  margin-bottom: var(--spacing-6);
}

@media (max-width: 768px) {
  .completeness-metrics-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .completeness-metrics-grid {
    grid-template-columns: 1fr;
  }
}

/* ========== METRIC CARDS (Glassmorphic) ========== */

.metric-card {
  padding: var(--spacing-4);
  text-align: center;
  /* Glassmorphic effect */
  background: var(--glass-white-8);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: 1px solid var(--glass-white-12);
  border-radius: var(--radius-glass-md);
  box-shadow: var(--shadow-glass-1);
  transition: all 0.2s ease;
}

.metric-card:hover {
  background: var(--glass-white-12);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glass-2);
}

.metric-card .metric-value {
  font-size: var(--text-3xl);
  font-weight: var(--weight-bold);
  color: var(--glass-text-primary);
  margin-bottom: var(--spacing-1);
}

.metric-card .metric-label {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
}

/* ========== DATE SPECIFICITY CHART ========== */

.date-specificity-chart {
  margin-top: var(--spacing-4);
}

.chart-title {
  font-size: var(--text-base);
  font-weight: var(--weight-medium);
  color: var(--glass-text-primary);
  margin: 0 0 var(--spacing-4) 0;
}

.chart-bars {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-3);
}

.bar-container {
  display: grid;
  grid-template-columns: 80px 1fr 100px;
  align-items: center;
  gap: var(--spacing-3);
}

.bar-label {
  font-size: var(--text-sm);
  color: var(--glass-text-secondary);
  text-align: right;
}

.bar-track {
  height: 12px;
  background: var(--glass-white-10);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.bar-fill {
  height: 100%;
  border-radius: var(--radius-full);
  transition: width 0.5s ease;
}

.bar-value {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
}

/* Timeline span info */
.timeline-span-info {
  display: flex;
  align-items: center;
  gap: var(--spacing-3);
  flex-wrap: wrap;
  margin-top: var(--spacing-4);
  padding: var(--spacing-3);
  background: var(--glass-white-6);
  border-radius: var(--radius-glass-sm);
}

.timeline-label {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
}

.timeline-value {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--glass-text-primary);
}

.timeline-range {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
}

/* ========== ACTION ITEMS SECTION ========== */

.action-items-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-3);
}

.action-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-4);
  /* Glassmorphic effect */
  background: var(--glass-white-6);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: var(--border-glass);
  border-radius: var(--radius-glass-md);
  transition: all 0.2s ease;
}

.action-item:hover {
  background: var(--glass-white-10);
  transform: translateX(4px);
}

.action-content {
  flex: 1;
}

.action-text {
  font-size: var(--text-base);
  color: var(--glass-text-primary);
}

.action-badges {
  display: flex;
  gap: var(--spacing-2);
}

.impact-badge,
.effort-badge {
  font-size: var(--text-xs);
  padding: var(--spacing-1) var(--spacing-2);
  border-radius: var(--radius-glass-sm);
  font-weight: var(--weight-medium);
  text-transform: capitalize;
}

.impact-badge.impact-high {
  background: rgba(80, 175, 123, 0.20);
  color: var(--color-glass-success);
}

.impact-badge.impact-medium {
  background: rgba(234, 179, 8, 0.20);
  color: #fbbf24;
}

.impact-badge.impact-low {
  background: var(--glass-white-15);
  color: var(--glass-text-muted);
}

.effort-badge.effort-high {
  background: rgba(239, 68, 68, 0.15);
  color: #f87171;
}

.effort-badge.effort-medium {
  background: rgba(234, 179, 8, 0.15);
  color: #fbbf24;
}

.effort-badge.effort-low {
  background: rgba(80, 175, 123, 0.15);
  color: var(--color-glass-success);
}

/* ========== SUGGESTED SOURCES SECTION ========== */

.sources-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--spacing-4);
}

.source-item {
  padding: var(--spacing-4);
  /* Glassmorphic effect */
  background: var(--glass-white-6);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: var(--border-glass);
  border-radius: var(--radius-glass-md);
  transition: all 0.2s ease;
}

.source-item:hover {
  background: var(--glass-white-10);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glass-1);
}

.source-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-2);
}

.source-type {
  font-size: var(--text-base);
  font-weight: var(--weight-semibold);
  color: var(--glass-text-primary);
}

.priority-badge {
  font-size: var(--text-xs);
  padding: var(--spacing-1) var(--spacing-2);
  border-radius: var(--radius-glass-sm);
  font-weight: var(--weight-medium);
  text-transform: capitalize;
}

.priority-badge.priority-high {
  background: rgba(218, 41, 28, 0.20);
  color: #f87171;
}

.priority-badge.priority-medium {
  background: rgba(234, 179, 8, 0.20);
  color: #fbbf24;
}

.priority-badge.priority-low {
  background: var(--glass-white-15);
  color: var(--glass-text-muted);
}

.source-reason {
  font-size: var(--text-sm);
  color: var(--glass-text-secondary);
  margin-bottom: var(--spacing-3);
  line-height: var(--leading-relaxed);
}

.source-improvement {
  font-size: var(--text-sm);
  color: var(--glass-text-muted);
  padding-top: var(--spacing-2);
  border-top: var(--border-glass);
}

.source-improvement strong {
  color: var(--glass-text-secondary);
}

/* ========== EMPTY STATE ========== */

.analysis-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  text-align: center;
  padding: var(--spacing-8);
  /* Glassmorphic effect */
  background: var(--glass-white-8);
  backdrop-filter: blur(var(--blur-xl));
  -webkit-backdrop-filter: blur(var(--blur-xl));
  border: var(--border-glass);
  border-radius: var(--radius-glass-xl);
  box-shadow: var(--shadow-glass-2);
}

.empty-state-icon {
  font-size: 64px;
  margin-bottom: var(--spacing-4);
  opacity: 0.6;
}

.analysis-empty-state h2 {
  font-size: var(--text-2xl);
  font-weight: var(--weight-semibold);
  color: var(--glass-text-primary);
  margin: 0 0 var(--spacing-2) 0;
}

.analysis-empty-state p {
  font-size: var(--text-base);
  color: var(--glass-text-secondary);
  margin: 0 0 var(--spacing-2) 0;
  max-width: 400px;
}

/* ========== RESPONSIVE ADJUSTMENTS ========== */

@media (max-width: 768px) {
  .analysis-header {
    flex-direction: column;
    gap: var(--spacing-4);
    align-items: flex-start;
  }

  .analysis-score-section {
    align-self: flex-start;
    flex-direction: row;
    align-items: center;
  }

  .bar-container {
    grid-template-columns: 60px 1fr 80px;
  }

  .action-item {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-3);
  }

  .sources-list {
    grid-template-columns: 1fr;
  }
}

/* ========== ACCESSIBILITY ========== */

.theme-card-header:focus-visible {
  outline: 3px solid var(--color-glass-success);
  outline-offset: -3px;
}

@media (prefers-reduced-motion: reduce) {
  .analysis-section,
  .stat-card,
  .metric-card,
  .theme-card,
  .action-item,
  .source-item,
  .theme-card-content {
    transition: none;
  }
}
