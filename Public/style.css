/* This file NO LONGER contains layout styles (e.g., body, .gantt-form).
  Those are now handled by Tailwind CSS in index.html.
  
  This file ONLY contains styles that are dynamically
  applied by main.js to the chart, modal, and chat interface.
  It is still required for the application to look correct.
*/
@import url('https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600&display=swap'); /* CHANGED */

/* --- BASE PAGE STYLES FOR CHART.HTML --- */
/* These ensure proper viewport scaling at 100% browser zoom */
html, body {
  margin: 0;
  padding: 0;
  min-height: 100%;
  box-sizing: border-box;
}

body {
  background-color: #1A1A1A; /* Dark background for chart page */
  font-family: 'Work Sans', sans-serif;
}

/* Chart root container - ensures proper viewport fit */
#chart-root {
  padding: 16px; /* SCALED: Compact padding around chart */
  max-width: 100vw; /* Prevent overflow beyond viewport */
  box-sizing: border-box;
  overflow-x: hidden; /* Hide any overflow at root level */
}

/* --- ACCESSIBILITY UTILITIES --- */
/* Screen reader only class - visually hidden but accessible to screen readers */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* ACCESSIBILITY: Visible focus indicators for keyboard navigation (WCAG 2.1 AA) */
/* Remove default outline and replace with custom high-contrast focus ring */
button:focus,
a:focus,
input:focus,
textarea:focus,
select:focus,
.gantt-bar:focus {
  outline: 3px solid #50AF7B; /* Green focus ring with 3px width */
  outline-offset: 2px; /* 2px spacing from element */
}

/* Focus within - for container elements */
button:focus-visible,
a:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 3px solid #50AF7B;
  outline-offset: 2px;
}

/* Skip to main content link (hidden until focused) */
.skip-to-content {
  position: absolute;
  top: -40px;
  left: 0;
  background: #50AF7B;
  color: white;
  padding: 8px 16px;
  text-decoration: none;
  font-weight: 600;
  z-index: 100;
  border-radius: 0 0 4px 0;
}

.skip-to-content:focus {
  top: 0;
  outline: 3px solid white;
  outline-offset: 2px;
}

/* --- GANTT CHART STYLES --- */
/* These are applied by main.js when building the chart */

/* 6. Gantt Chart Container */
#gantt-chart-container {
  width: 100%;
  max-width: calc(100vw - 32px); /* SCALED: Prevent overflow beyond viewport (accounts for #chart-root padding) */
  border: 1px solid #0D0D0D; /* Darker border (using grid line color) */
  border-radius: 8px;
  background-color: transparent; /* Changed from #0c2340 to remove blue bar */
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  overflow-x: auto; /* Allow horizontal scrolling */
  overflow-y: auto; /* Allow vertical scrolling for sticky header */
  max-height: 80vh; /* Limit height to enable vertical scrolling */
  margin-top: 0; /* Removed margin-top to eliminate blue bar spacing */
  font-family: 'Work Sans', sans-serif; /* CHANGED */
  position: relative; /* Added for vertical SVG border */
  box-sizing: border-box; /* Include border in width calculation */
}

/* 7. Chart Title Container (holds title text and logo) */
.gantt-title-container {
  /* Flexbox properties are set inline in JavaScript for dynamic alignment */
  transition: all 0.2s;
  position: sticky;
  top: 0;
  z-index: 20; /* Above header cells and bars */
}

/* Chart Title */
.gantt-title {
  text-align: center;
  font-size: 1.0rem; /* SCALED: Was 1.425rem - reduced for compact display */
  font-weight: 700; /* Increased from 600 for better readability */
  color: #FFFFFF; /* Text Color */
  transition: all 0.2s;
  /* Note: padding, border, background, and border-radius are now on .gantt-title-container */
}

/* Show outline on title hover when in edit mode */
.gantt-title.edit-mode-enabled:hover {
  outline: 2px dashed rgba(80, 175, 123, 0.6);
  outline-offset: 2px;
  background-color: rgba(80, 175, 123, 0.1);
  cursor: text;
}

/* Style for title when actively being edited */
.gantt-title[contenteditable="true"],
.gantt-title.editing {
  outline: 2px solid #50AF7B;
  outline-offset: 2px;
  background-color: rgba(80, 175, 123, 0.15);
  cursor: text;
}

.gantt-title[contenteditable="true"]:focus,
.gantt-title.editing:focus {
  outline: 2px solid #3C8D62;
  background-color: rgba(80, 175, 123, 0.2);
}

/* 8. Main Grid Layout */
.gantt-grid {
  display: grid;
  width: 100%;
  position: relative; /* For "Today" line */
}

/* 9. Grid Header (Weeks) - Sticky with title */
.gantt-header {
  font-size: 0.6rem; /* SCALED: Was 0.75rem - further reduced for compact display */
  font-weight: 600;
  padding: 2px 1px; /* SCALED: Was 3px 2px - reduced padding */
  text-align: center;
  background-color: #0c2340; /* CHANGED to new color */
  border-bottom: 1px solid #0D0D0D; /* Grid line color (Correctly not white) */
  border-left: 0.5px solid #0D0D0D; /* Grid line color (CHANGED to black) */
  color: #FFFFFF; /* Text Color */
  position: sticky;
  top: var(--title-height, 50px); /* SCALED: Was 70px - reduced fallback */
  z-index: 15; /* Below title container (20), above bars (2) */
}
.gantt-header-label { /* First header cell (empty) */
  border-left: 0; /* Keep left border at 0 */
  /* background-color: #28228; */ /* Removed this override */
}

/* 10. Row Label (Swimlane or Task) */
.gantt-row-label {
  padding: 0; /* Remove padding from parent - will be applied to children */
  font-size: 0.7rem; /* SCALED: Was 0.75rem - further reduced for compact display */
  border-bottom: 1px solid #0D0D0D; /* Grid line color */
  white-space: nowrap; /* Prevent text wrapping - column will auto-expand */
  overflow: visible; /* Allow text to be fully visible */
  display: grid; /* Changed to grid for better html2canvas alignment support */
  grid-template-columns: 1fr auto; /* Label content takes available space, actions auto-size */
  align-items: center; /* Grid align-items may work better than flex in html2canvas */
  gap: 2px; /* SCALED: Was 3px */
  min-height: 16px; /* SCALED: Was 22px - significantly reduced for compact display */
}

/* Phase 3: Label content wrapper */
.gantt-row-label .label-content {
  /* Grid item - no flex properties needed */
  min-width: 0;
  transition: all 0.2s;
  border-radius: 2px;
  padding: 2px 3px; /* SCALED: Was 4px 3px - reduced vertical padding */
  display: block;
  line-height: 1.3; /* SCALED: Was 1.5 - reduced line-height */
}

/* Show outline on label hover when in edit mode (for both tasks and swimlanes) */
.gantt-grid.edit-mode-enabled .gantt-row-label.task:hover .label-content,
.gantt-grid.edit-mode-enabled .gantt-row-label.swimlane:hover .label-content {
  outline: 2px dashed rgba(80, 175, 123, 0.6);
  outline-offset: 2px;
  background-color: rgba(80, 175, 123, 0.1);
}

/* Phase 3: Row action buttons */
.row-actions {
  display: none; /* Hidden by default */
  gap: 4px; /* SCALED: Was 6px */
  align-items: center; /* Grid item - should align with parent grid */
}

/* Show row actions on hover only when edit mode is enabled */
.gantt-grid.edit-mode-enabled .gantt-row-label:hover .row-actions {
  display: flex; /* Display as flex to layout buttons horizontally */
}

.row-action-btn {
  width: 14px; /* SCALED: Was 18px */
  height: 14px; /* SCALED: Was 18px */
  border: 1px solid rgba(255, 255, 255, 0.3); /* Add border for emphasis */
  border-radius: 3px; /* SCALED: Was 4px */
  font-size: 0.95rem; /* Normalized to match all text on screen */
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  line-height: 1;
  padding: 0;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); /* SCALED: Was 0 1px 3px */
}

.row-action-btn.add-task {
  background-color: #50AF7B;
  color: white;
}

.row-action-btn.add-task:hover {
  background-color: #3C8D62;
  transform: scale(1.15); /* Increased from 1.1 */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
  border-color: rgba(255, 255, 255, 0.5);
}

.row-action-btn.delete-task {
  background-color: #BA3930;
  color: white;
}

.row-action-btn.delete-task:hover {
  background-color: #9A2F28;
  transform: scale(1.15); /* Increased from 1.1 */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
  border-color: rgba(255, 255, 255, 0.5);
}

/* Phase 4: Editable label styles */
.label-content[contenteditable="true"],
.label-content.editing {
  outline: 2px solid #50AF7B;
  outline-offset: 2px;
  background-color: rgba(80, 175, 123, 0.1);
  border-radius: 4px;
  padding: 2px 4px;
  cursor: text;
}

.label-content[contenteditable="true"]:focus,
.label-content.editing:focus {
  outline: 2px solid #3C8D62;
  background-color: rgba(80, 175, 123, 0.15);
}

.gantt-row-label.swimlane {
  font-weight: 700;
  color: #FFFFFF; /* Text Color */
  background-color: #0C2340; /* Set swimlane title background */
  font-size: 0.75rem; /* SCALED: Was 0.85rem - reduced for compact display */
  padding: 0; /* Padding moved to .label-content */
  line-height: 1.3; /* SCALED: Was 1.5 - reduced line-height */
}

.gantt-row-label.swimlane .label-content {
  padding: 2px 4px; /* SCALED: Was 5px 4px - reduced vertical padding */
}

.gantt-row-label.task {
  padding: 0; /* Padding moved to .label-content */
  font-weight: 500;
  color: #FFFFFF; /* Text Color */
  border-bottom: 1px solid #0D0D0D; /* Grid line color */
  background-color: #354259; /* Set task title background - default blue */
  font-size: 0.7rem; /* SCALED: Was 0.75rem - further reduced for compact display */
  line-height: 1.3; /* SCALED: Was 1.5 - reduced line-height */
}

.gantt-row-label.task .label-content {
  padding: 2px 3px 2px 6px; /* SCALED: Was 5px 3px 5px 6px - reduced vertical padding */
}

.gantt-row-label.task:hover {
  background-color: #546579; /* Keep static blue on hover */
  cursor: pointer;
}

/* 11. Bar Area */
.gantt-bar-area {
  position: relative;
  display: grid;
  align-items: center; /* Center bars vertically */
  min-height: 16px; /* SCALED: Was 22px - significantly reduced for compact display */
}

.gantt-bar-area.task {
  background-color: #383838; /* Task row background */
}

.gantt-bar-area.task:hover,
.gantt-bar-area.task.row-hover {
  background-color: #546579; /* Hover effect */
  cursor: pointer;
}

.gantt-bar-area.swimlane {
  background-color: #0c2340; /* Swimlane background */
}

/* 11a. Time Cell (individual cells within bar area for grid lines) */
.gantt-time-cell {
  grid-row: 1;
  pointer-events: none; /* Allow clicks to pass through to bar area */
  background: transparent; /* Inherit background from bar area */
  z-index: 1; /* Above bar area background, below bars */
}

/* 12. The Actual Bar */
.gantt-bar {
  position: relative;
  height: 10px; /* SCALED: Was 14px - significantly reduced for compact display */
  margin: 3px 1px; /* SCALED: Was 4px 2px - reduced margins */
  border-radius: 2px; /* SCALED: Was 3px */
  color: white;
  z-index: 2; /* Above time cells (which are z-index 1) */
  overflow: visible; /* Changed to visible for resize handles */
  grid-row: 1; /* Always on the first (and only) row of its container */
}

/* Phase 2: Resize handles using pseudo-elements */
/* By default, handles have no content (completely hidden) */
.gantt-bar::before,
.gantt-bar::after {
  content: none; /* No content by default - prevents any visibility */
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 6px; /* SCALED: Was 10px */
  height: 90%; /* Increased from 80% */
  background: rgba(255, 255, 255, 0.9); /* More opaque */
  cursor: ew-resize;
  opacity: 0;
  transition: all 0.2s;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px; /* SCALED: Was 14px */
  color: rgba(0, 0, 0, 0.6);
  font-weight: bold;
  border: 2px solid rgba(255, 255, 255, 0.5);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.gantt-bar::before {
  left: 0;
  border-radius: 4px 0 0 4px;
}

.gantt-bar::after {
  right: 0;
  border-radius: 0 4px 4px 0;
}

/* Only show resize handles in edit mode - add content AND make visible */
.gantt-grid.edit-mode-enabled .gantt-bar:hover::before,
.gantt-grid.edit-mode-enabled .gantt-bar:hover::after,
.gantt-bar.resizing::before,
.gantt-bar.resizing::after {
  content: '⋮⋮'; /* Add vertical dots symbol for visibility */
  opacity: 1;
}

/* Extra emphasis on hover for resize handles */
.gantt-grid.edit-mode-enabled .gantt-bar:hover::before:hover,
.gantt-grid.edit-mode-enabled .gantt-bar:hover::after:hover {
  background: rgba(80, 175, 123, 0.95);
  color: white;
  transform: translateY(-50%) scale(1.1);
}

/* Bar Colors (HIGH CONTRAST PALETTE) */
.gantt-bar[data-color="priority-red"] { background-color: #EF4444; } /* Bright Red */
.gantt-bar[data-color="medium-red"] { background-color: #FB923C; } /* Orange */
.gantt-bar[data-color="mid-grey"] { background-color: #14B8A6; } /* Teal */
.gantt-bar[data-color="light-grey"] { background-color: #E879F9; } /* Bright Pink-Purple */
.gantt-bar[data-color="white"] { background-color: #FFFFFF; } /* White */
.gantt-bar[data-color="dark-blue"] { background-color: #3B82F6; } /* Bright Blue */

/* Visual feedback for gantt bars in edit mode */
.gantt-grid.edit-mode-enabled .gantt-bar:hover {
  outline: 2px dashed rgba(255, 255, 255, 0.7);
  outline-offset: 2px;
  filter: brightness(1.15);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

/* 13. Export Button and Edit Mode Toggle Styling */
.export-container {
  display: flex;
  justify-content: center;
  gap: 6px; /* SCALED: Was 10px - further reduced */
  padding: 8px 0 6px 0; /* SCALED: Was 16px 0 12px 0 - significantly reduced */
  font-family: 'Work Sans', sans-serif; /* CHANGED */
}
.export-button {
  font-family: 'Work Sans', sans-serif; /* CHANGED */
  font-size: 0.75rem; /* SCALED: Was 0.95rem - reduced for compact buttons */
  font-weight: 600; /* SCALED: Was 700 */
  color: #ffffff;
  background-color: #50AF7B; /* Use one of the old dark mode colors (Green) */
  border: none;
  border-radius: 4px; /* SCALED: Was 6px */
  padding: 6px 14px; /* SCALED: Was 10px 24px - significantly reduced */
  cursor: pointer;
  box-shadow: 0 1px 4px rgba(0,0,0,0.25); /* SCALED: Was 0 2px 8px */
  transition: all 0.2s; /* Transition all properties */
}
.export-button:hover {
  background-color: #3C8D62;
  box-shadow: 0 6px 16px rgba(0,0,0,0.4); /* Even stronger shadow on hover */
  transform: translateY(-2px); /* Slight lift on hover */
}
.export-button:disabled {
  background-color: #4a4a4a;
  cursor: not-allowed;
  transform: none; /* No lift when disabled */
}

/* Edit Mode Toggle Button */
.edit-mode-toggle-button {
  font-family: 'Work Sans', sans-serif;
  font-size: 0.75rem; /* SCALED: Was 0.95rem - reduced for compact buttons */
  font-weight: 600; /* SCALED: Was 700 */
  color: #ffffff;
  background-color: #BA3930; /* Red for locked/disabled state */
  border: none;
  border-radius: 4px; /* SCALED: Was 6px */
  padding: 6px 14px; /* SCALED: Was 10px 24px - significantly reduced */
  cursor: pointer;
  box-shadow: 0 1px 4px rgba(0,0,0,0.25); /* SCALED: Was 0 2px 8px */
  transition: all 0.2s;
}
.edit-mode-toggle-button:hover {
  box-shadow: 0 6px 16px rgba(0,0,0,0.4);
  transform: translateY(-2px);
  filter: brightness(1.1); /* Brighten on hover */
}

/* Copy Share URL Button */
.copy-url-button {
  font-family: 'Work Sans', sans-serif;
  font-size: 0.75rem; /* SCALED: Was 0.95rem - reduced for compact buttons */
  font-weight: 600; /* SCALED: Was 700 */
  color: #ffffff;
  background-color: #1976D2; /* Blue for sharing/link action */
  border: none;
  border-radius: 4px; /* SCALED: Was 6px */
  padding: 6px 14px; /* SCALED: Was 10px 24px - significantly reduced */
  cursor: pointer;
  box-shadow: 0 1px 4px rgba(0,0,0,0.25); /* SCALED: Was 0 2px 8px */
  transition: all 0.2s;
}
.copy-url-button:hover {
  background-color: #1565C0;
  box-shadow: 0 6px 16px rgba(0,0,0,0.4);
  transform: translateY(-2px);
}

/* ------------------------------------------------------------------- */
/* --- "TODAY" VERTICAL LINE --- */
/* ------------------------------------------------------------------- */
.gantt-today-line {
  position: absolute;
  width: 1px; /* Thin red line */
  background-color: #BA3930; /* Use Red color from old palette */
  z-index: 3; /* Above bars (bars are z-index 2) */
  /* 'top', 'bottom', and 'left' are set by JavaScript */
}


/* ------------------------------------------------------------------- */
/* --- ANALYSIS MODAL STYLES (Adjusted for Dark Mode) --- */
/* ------------------------------------------------------------------- */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  padding: 24px;
  box-sizing: border-box;
  font-family: 'Work Sans', sans-serif; /* CHANGED */
}

.modal-content {
  background-color: #1A1A1A; /* Dark Modal Background */
  border-radius: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  width: 100%;
  max-width: 700px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  color: #FFFFFF; /* Default text color */
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid #383838; /* Darker separator */
}

.modal-title {
  font-size: 18px;
  font-weight: 600;
  color: #FFFFFF;
  margin: 0;
}

.modal-actions {
  display: flex;
  gap: 12px;
  align-items: center;
}

.modal-export-btn {
  font-size: 20px;
  color: #BFBFBF; /* ACCESSIBILITY: Updated from #AAAAAA for WCAG 2.1 AA compliance (5.5:1 contrast) */
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px 8px;
  line-height: 1;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.modal-export-btn:hover {
  color: #50AF7B;
  background-color: rgba(80, 175, 123, 0.1);
}

.modal-close {
  font-size: 28px;
  font-weight: 300;
  color: #BFBFBF; /* ACCESSIBILITY: Updated from #AAAAAA for WCAG 2.1 AA compliance (5.5:1 contrast) */ /* Light grey close button */
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}
.modal-close:hover {
  color: #FFFFFF;
}

.modal-body {
  padding: 24px;
  overflow-y: auto;
  color: #FFFFFF;
}

.modal-spinner {
  width: 32px;
  height: 32px;
  border: 4px solid #383838;
  border-top-color: #50AF7B; /* Green accent */
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 40px auto;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.modal-error {
  color: #BA3930;
  font-weight: 500;
  text-align: center;
  padding: 20px;
}

.analysis-section {
  margin-bottom: 20px;
}
.analysis-section:last-child {
  margin-bottom: 0;
}

.analysis-section h4 {
  font-size: 20px; /* Increased from 14px for better readability */
  font-weight: 600;
  color: #FFFFFF;
  margin-top: 0;
  margin-bottom: 8px;
  border-bottom: 1px solid #383838; /* Darker separator */
  padding-bottom: 4px;
}

.analysis-section p {
  font-size: 18px; /* Increased from 14px for better readability */
  color: #CCCCCC; /* Lighter text for body */
  line-height: 1.6;
  margin: 0;
}

.status-pill {
  display: inline-block;
  padding: 4px 12px; /* Increased padding for larger text */
  font-size: 16px; /* Increased from 12px for better readability */
  font-weight: 600;
  border-radius: 999px;
  text-transform: capitalize;
}
/* Re-mapped status colors for dark background contrast */
.status-pill.status-completed {
  color: #50AF7B; /* Green text */
  background-color: #1A3025; /* Dark Green background */
}
.status-pill.status-in-progress {
  color: #EE9E20; /* Ochre text */
  background-color: #382A13; /* Dark Ochre background */
}
.status-pill.status-not-started {
  color: #BA3930; /* Red text */
  background-color: #2F120F; /* Dark Red background */
}
.status-pill.status-n\/a {
  color: #BFBFBF; /* ACCESSIBILITY: Updated from #AAAAAA for WCAG 2.1 AA compliance (5.5:1 contrast) */
  background-color: #383838;
}


.analysis-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.analysis-list li {
  padding: 8px 0;
  border-bottom: 1px solid #383838; /* Darker separator */
}
.analysis-list li:last-child {
  border-bottom: 0;
}
.analysis-list li p {
  margin: 0;
  font-size: 18px; /* Increased from 14px for better readability */
  color: #CCCCCC;
}
.analysis-list li .source {
  font-size: 16px; /* Increased from 12px for better readability */
  color: #B3B3B3; /* ACCESSIBILITY: Updated from #888888 for WCAG 2.1 AA compliance (5.0:1 contrast) */
  font-style: italic;
}

.analysis-list li .source a {
  color: #2E7BB1; /* Dark Blue link */
  text-decoration: underline;
  cursor: pointer;
  font-style: italic; /* Maintain italic style */
}
.analysis-list li .source a:hover {
  color: #66A3D9; /* Lighter blue on hover */
}


/* ------------------------------------------------------------------- */
/* --- CHAT INTERFACE STYLES (Adjusted for Dark Mode) --- */
/* ------------------------------------------------------------------- */

.chat-container {
  margin-top: 24px;
  border-top: 1px solid #383838;
  padding-top: 20px;
}

.chat-title {
  font-size: 20px; /* Increased from 14px for better readability */
  font-weight: 600;
  color: #FFFFFF;
  margin-top: 0;
  margin-bottom: 12px;
}

.chat-history {
  height: 150px;
  max-height: 150px;
  overflow-y: auto;
  border: 1px solid #383838;
  border-radius: 6px;
  padding: 12px;
  background-color: #0c2340; /* Match chart background */
  margin-bottom: 12px;
}

.chat-message {
  font-size: 18px; /* Increased from 14px for better readability */
  line-height: 1.6;
  padding: 10px 14px; /* Increased padding for larger text */
  border-radius: 8px;
  margin-bottom: 8px;
  max-width: 85%;
}
.chat-message:last-child {
  margin-bottom: 0;
}

.chat-message-user {
  background-color: #2E7BB1; /* Dark Blue */
  color: #FFFFFF;
  margin-left: auto;
  text-align: right;
}

.chat-message-llm {
  background-color: #383838; /* Dark Grey */
  color: #FFFFFF;
  margin-right: auto;
  text-align: left;
}

.chat-spinner {
  width: 16px;
  height: 16px;
  border: 2px solid #555555;
  border-top-color: #BFBFBF; /* ACCESSIBILITY: Updated from #AAAAAA for WCAG 2.1 AA compliance */
  border-radius: 50%;
  animation: spin 1s linear infinite;
  display: inline-block; 
}

.chat-form {
  display: flex;
  gap: 8px;
}

.chat-input {
  flex-grow: 1;
  font-family: 'Work Sans', sans-serif; /* CHANGED */
  font-size: 18px; /* Increased from 14px for better readability */
  border: 1px solid #383838;
  border-radius: 6px;
  padding: 10px 14px; /* Increased padding for larger text */
  color: #FFFFFF;
  background-color: #0c2340;
}

.chat-send-btn {
  font-family: 'Work Sans', sans-serif; /* CHANGED */
  font-size: 18px; /* Increased from 14px for better readability */
  font-weight: 600;
  color: #ffffff;
  background-color: #2E7BB1; /* Dark Blue send button */
  border: none;
  border-radius: 6px;
  padding: 8px 16px;
  cursor: pointer;
  transition: background-color 0.2s;
}
.chat-send-btn:hover {
  background-color: #1F6AA1;
}

/* ------------------------------------------------------------------- */
/* --- PHASE 1 ENHANCEMENTS - TASK ANALYSIS STYLES --- */
/* ------------------------------------------------------------------- */

/* Increase modal width for richer content */
.modal-content {
  max-width: 900px; /* Increased from 700px */
}

/* Collapsible Sections */
.analysis-section.collapsible {
  transition: all 0.3s ease;
}

.collapsible-header {
  cursor: pointer;
  user-select: none;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.collapsible-header:hover {
  color: #FFFFFF !important;
  opacity: 0.9;
}

.collapse-toggle {
  font-size: 16px; /* Increased from 12px for better readability */
  transition: transform 0.3s ease;
  margin-left: 8px;
}

.analysis-section.collapsed .scenarios-container,
.analysis-section.collapsed .risks-container,
.analysis-section.collapsed .impact-content,
.analysis-section.collapsed .scheduling-content,
.analysis-section.collapsed .progress-content,
.analysis-section.collapsed .accelerators-content {
  display: none;
}

.analysis-section.collapsed {
  padding-bottom: 12px;
}

/* Timeline Scenarios Section */
.timeline-scenarios-section {
  background-color: #222222;
  border: 1px solid #383838;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 24px;
}

.scenarios-container {
  margin-top: 12px;
}

.timeline-scenario {
  margin-bottom: 16px;
}

.timeline-scenario:last-child {
  margin-bottom: 0;
}

.scenario-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.scenario-label {
  font-weight: 600;
  font-size: 18px; /* Increased from 14px for better readability */
  color: #FFFFFF;
  min-width: 110px; /* Increased to accommodate larger text */
}

.scenario-date {
  font-weight: 500;
  font-size: 18px; /* Increased from 14px for better readability */
  color: #CCCCCC;
}

.confidence-badge {
  font-size: 14px; /* Increased from 11px for better readability */
  font-weight: 600;
  padding: 4px 10px; /* Increased padding for larger text */
  border-radius: 12px;
  text-transform: uppercase;
}

.confidence-high {
  background-color: #1A3025;
  color: #50AF7B;
}

.confidence-medium {
  background-color: #382A13;
  color: #EE9E20;
}

.confidence-low {
  background-color: #2F120F;
  color: #BA3930;
}

/* Timeline bars */
.timeline-bar {
  height: 8px;
  border-radius: 4px;
  margin-bottom: 6px;
  position: relative;
}

.best-case-bar {
  background: linear-gradient(90deg, #50AF7B 0%, #6BC794 100%);
  width: 60%;
}

.expected-bar {
  background: linear-gradient(90deg, #EE9E20 0%, #F5B555 100%);
  width: 80%;
}

.worst-case-bar {
  background: linear-gradient(90deg, #BA3930 0%, #D45A51 100%);
  width: 100%;
}

.scenario-detail {
  font-size: 17px; /* Increased from 13px for better readability */
  color: #BFBFBF; /* ACCESSIBILITY: Updated from #AAAAAA for WCAG 2.1 AA compliance (5.5:1 contrast) */
  font-style: italic;
  margin: 4px 0 0 0;
  line-height: 1.5;
}

.delay-factors {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid #383838;
}

.delay-factors h5 {
  font-size: 18px; /* Increased from 13px for better readability */
  font-weight: 600;
  color: #FFFFFF;
  margin: 0 0 8px 0;
}

.delay-factors ul {
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.delay-factors li {
  font-size: 17px; /* Increased from 13px for better readability */
  color: #CCCCCC;
  padding: 4px 0 4px 20px;
  position: relative;
}

.delay-factors li:before {
  content: "⚠️";
  position: absolute;
  left: 0;
}

/* Risk Analysis Section */
.risks-section {
  background-color: #222222;
  border: 1px solid #383838;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 24px;
}

.risks-container {
  margin-top: 12px;
}

.risk-card {
  background-color: #1A1A1A;
  border-left: 4px solid #383838;
  border-radius: 6px;
  padding: 12px 16px;
  margin-bottom: 12px;
}

.risk-card:last-child {
  margin-bottom: 0;
}

.risk-card.risk-high {
  border-left-color: #BA3930;
}

.risk-card.risk-medium {
  border-left-color: #EE9E20;
}

.risk-card.risk-low {
  border-left-color: #666666;
}

.risk-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.risk-severity-badge {
  font-size: 14px; /* Increased from 11px for better readability */
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.severity-high {
  background-color: #2F120F;
  color: #BA3930;
}

.severity-medium {
  background-color: #382A13;
  color: #EE9E20;
}

.severity-low {
  background-color: #2A2A2A;
  color: #B3B3B3; /* ACCESSIBILITY: Updated from #888888 for WCAG 2.1 AA compliance (5.0:1 contrast) */
}

.risk-likelihood {
  font-size: 16px; /* Increased from 12px for better readability */
  color: #BFBFBF; /* ACCESSIBILITY: Updated from #AAAAAA for WCAG 2.1 AA compliance (5.5:1 contrast) */
  font-style: italic;
}

.risk-name {
  font-size: 18px; /* Increased from 14px for better readability */
  font-weight: 600;
  color: #FFFFFF;
  flex-grow: 1;
}

.risk-impact,
.risk-mitigation {
  font-size: 17px; /* Increased from 13px for better readability */
  color: #CCCCCC;
  line-height: 1.5;
  margin: 6px 0;
}

.risk-impact strong,
.risk-mitigation strong {
  color: #FFFFFF;
  font-weight: 600;
}

/* Impact Analysis Section */
.impact-section {
  background-color: #222222;
  border: 1px solid #383838;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 24px;
}

.impact-content {
  margin-top: 12px;
}

.impact-item {
  font-size: 18px; /* Increased from 14px for better readability */
  color: #CCCCCC;
  line-height: 1.6;
  margin: 8px 0;
}

.impact-item strong {
  color: #FFFFFF;
  font-weight: 600;
  display: inline-block;
  min-width: 140px;
}

.impact-value {
  color: #EE9E20;
  font-weight: 600;
}

/* Scheduling Context Section */
.scheduling-section {
  background-color: #222222;
  border: 1px solid #383838;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 24px;
}

.scheduling-content {
  margin-top: 12px;
}

.scheduling-item {
  font-size: 18px; /* Increased from 14px for better readability */
  color: #CCCCCC;
  line-height: 1.6;
  margin: 12px 0;
}

.scheduling-item strong {
  color: #FFFFFF;
  font-weight: 600;
  display: block;
  margin-bottom: 4px;
}

.dependency-list {
  list-style: none;
  padding-left: 0;
  margin: 4px 0 0 0;
}

.dependency-list li {
  font-size: 17px; /* Increased from 13px for better readability */
  color: #CCCCCC;
  padding: 4px 0 4px 20px;
  position: relative;
}

.dependency-list li:before {
  content: "→";
  position: absolute;
  left: 0;
  color: #2E7BB1;
  font-weight: bold;
}

/* ------------------------------------------------------------------- */
/* --- PHASE 2 ENHANCEMENTS - PROGRESS & ACCELERATORS STYLES --- */
/* ------------------------------------------------------------------- */

/* Progress Indicators Section */
.progress-section {
  background-color: #222222;
  border: 1px solid #383838;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 24px;
}

.progress-content {
  margin-top: 12px;
}

/* Progress Bar */
.progress-bar-container {
  margin-bottom: 16px;
}

.progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  flex-wrap: wrap;
  gap: 8px;
}

.progress-percent {
  font-size: 16px;
  font-weight: 600;
  color: #FFFFFF;
}

.velocity-badge {
  font-size: 12px;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 12px;
  text-transform: capitalize;
}

.velocity-on-track {
  background-color: #1A3025;
  color: #50AF7B;
}

.velocity-behind {
  background-color: #2F120F;
  color: #BA3930;
}

.velocity-ahead {
  background-color: #1A2530;
  color: #66A3D9;
}

.progress-bar-track {
  height: 12px;
  background-color: #383838;
  border-radius: 6px;
  overflow: hidden;
  position: relative;
}

.progress-bar-fill {
  height: 100%;
  border-radius: 6px;
  transition: width 0.3s ease;
  position: relative;
}

.progress-on-track {
  background: linear-gradient(90deg, #50AF7B 0%, #6BC794 100%);
}

.progress-behind {
  background: linear-gradient(90deg, #BA3930 0%, #D45A51 100%);
}

.progress-ahead {
  background: linear-gradient(90deg, #2E7BB1 0%, #66A3D9 100%);
}

/* Milestones */
.milestones-section {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid #383838;
}

.milestones-section h5 {
  font-size: 13px;
  font-weight: 600;
  color: #FFFFFF;
  margin: 0 0 12px 0;
}

.milestones-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.milestone-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px solid #383838;
}

.milestone-item:last-child {
  border-bottom: none;
}

.milestone-icon {
  font-size: 16px;
  flex-shrink: 0;
  margin-top: 2px;
}

.milestone-details {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.milestone-name {
  font-size: 14px;
  color: #FFFFFF;
  font-weight: 500;
}

.milestone-date {
  font-size: 12px;
  color: #B3B3B3; /* ACCESSIBILITY: Updated from #888888 for WCAG 2.1 AA compliance (5.0:1 contrast) */
}

.milestone-completed .milestone-name {
  color: #CCCCCC;
}

.milestone-pending .milestone-name {
  color: #FFFFFF;
}

/* Active Blockers */
.blockers-section {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid #383838;
}

.blockers-section h5 {
  font-size: 13px;
  font-weight: 600;
  color: #BA3930;
  margin: 0 0 8px 0;
}

.blockers-list {
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.blockers-list li {
  font-size: 13px;
  color: #CCCCCC;
  padding: 6px 0;
  line-height: 1.5;
}

/* Motivators & Accelerators Section */
.accelerators-section {
  background-color: #222222;
  border: 1px solid #383838;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 24px;
}

.accelerators-content {
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
}

.accelerator-subsection {
  background-color: #1A1A1A;
  border: 1px solid #2A2A2A;
  border-radius: 6px;
  padding: 12px;
}

.accelerator-subsection h5 {
  font-size: 13px;
  font-weight: 600;
  color: #FFFFFF;
  margin: 0 0 8px 0;
  border-bottom: 1px solid #383838;
  padding-bottom: 6px;
}

.accelerator-list {
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.accelerator-list li {
  font-size: 13px;
  color: #CCCCCC;
  padding: 4px 0 4px 16px;
  position: relative;
  line-height: 1.5;
}

.accelerator-list li:before {
  content: "▸";
  position: absolute;
  left: 0;
  color: #50AF7B;
  font-weight: bold;
}

/* ------------------------------------------------------------------- */
/* ------------------------------------------------------------------- */
/* --- PHASE 3 ENHANCEMENTS - MULTI-COLUMN LAYOUT & POLISH --- */
/* ------------------------------------------------------------------- */

/* Two-Column Layout */
.analysis-layout {
  display: flex;
  gap: 24px;
  flex-direction: column;
}

@media (min-width: 1000px) {
  .analysis-layout {
    flex-direction: row;
  }

  .analysis-sidebar {
    flex: 0 0 280px;
    position: sticky;
    top: 24px;
    align-self: flex-start;
    max-height: calc(90vh - 140px);
    overflow-y: auto;
  }

  .analysis-main {
    flex: 1;
    min-width: 0;
  }
}

/* Quick Facts Panel */
.quick-facts-panel {
  background-color: #1A1A1A;
  border: 1px solid #383838;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.quick-facts-panel h4 {
  font-size: 14px;
  font-weight: 600;
  color: #FFFFFF;
  margin: 0 0 16px 0;
  padding-bottom: 8px;
  border-bottom: 1px solid #383838;
}

.quick-fact {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid #2A2A2A;
}

.quick-fact:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.fact-label {
  font-size: 12px;
  color: #B3B3B3; /* ACCESSIBILITY: Updated from #888888 for WCAG 2.1 AA compliance (5.0:1 contrast) */
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.fact-value {
  font-size: 13px;
  color: #FFFFFF;
  font-weight: 500;
  text-align: right;
}

.fact-value.impact-highlight {
  color: #EE9E20;
  font-weight: 600;
}

.fact-value.confidence-high {
  color: #50AF7B;
}

.fact-value.confidence-medium {
  color: #EE9E20;
}

.fact-value.confidence-low {
  color: #BA3930;
}

.quick-fact.alert-fact {
  background-color: #2F120F;
  margin: 0 -16px;
  padding: 10px 16px;
  border-left: 3px solid #BA3930;
}

.quick-fact.alert-fact .fact-label {
  color: #FFFFFF;
  font-weight: 600;
}

.quick-fact.alert-fact .fact-value {
  color: #BA3930;
  font-weight: 700;
  font-size: 16px;
}

/* Confidence Badge in Header */
.confidence-badge-header {
  font-size: 11px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 12px;
  text-transform: uppercase;
  margin-left: 12px;
  letter-spacing: 0.5px;
  display: inline-block;
  vertical-align: middle;
}

.confidence-badge-header.confidence-high {
  background-color: #1A3025;
  color: #50AF7B;
}

.confidence-badge-header.confidence-medium {
  background-color: #382A13;
  color: #EE9E20;
}

.confidence-badge-header.confidence-low {
  background-color: #2F120F;
  color: #BA3930;
}

/* Enhanced Visual Polish */
/* Add subtle shadows to major sections */
.timeline-scenarios-section,
.risks-section,
.impact-section,
.scheduling-section,
.progress-section,
.accelerators-section {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  transition: box-shadow 0.3s ease, transform 0.2s ease;
}

.timeline-scenarios-section:hover,
.risks-section:hover,
.impact-section:hover,
.scheduling-section:hover,
.progress-section:hover,
.accelerators-section:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  transform: translateY(-2px);
}

/* Improve modal shadow */
.modal-content {
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}

/* Add subtle gradient to modal header */
.modal-header {
  background: linear-gradient(135deg, #1A1A1A 0%, #242424 100%);
}

/* ------------------------------------------------------------------- */
/* --- GANTT LEGEND STYLES --- */
/* ------------------------------------------------------------------- */
.gantt-legend {
  padding: 8px 12px; /* SCALED: Was 16px 20px - further reduced */
  margin-top: 8px; /* SCALED: Was 16px - reduced */
  border-radius: 4px; /* SCALED: Was 6px */
  border-top: 1px solid #0D0D0D; /* SCALED: Was 2px - thinner border */
  background-color: #0C2340; /* Set background to match swimlanes */
  color: #FFFFFF;
}

.legend-line {
  display: flex;
  align-items: center;
  gap: 8px; /* SCALED: Was 12px - further reduced */
  flex-wrap: wrap; /* Allow wrapping if needed */
}

.legend-title {
  font-size: 0.7rem; /* SCALED: Was 0.85rem - reduced to match row labels */
  font-weight: 700; /* Match swimlane label weight */
  margin: 0;
  color: #FFFFFF;
  flex-shrink: 0; /* Prevent title from shrinking */
}

.legend-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px; /* SCALED: Was 16px - further reduced */
  align-items: center;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 4px; /* SCALED: Was 8px - further reduced */
}

.legend-color-box {
  width: 12px; /* SCALED: Was 20px - significantly reduced */
  height: 12px; /* SCALED: Was 20px - significantly reduced */
  border-radius: 2px; /* SCALED: Was 3px */
  border: 1px solid rgba(255, 255, 255, 0.3); /* SCALED: Was 2px */
  flex-shrink: 0; /* Prevent box from shrinking */
}

/* Use data-color attributes for legend (HIGH CONTRAST PALETTE) */
.legend-color-box[data-color="priority-red"] { background-color: #EF4444; } /* Bright Red */
.legend-color-box[data-color="medium-red"] { background-color: #FB923C; } /* Orange */
.legend-color-box[data-color="mid-grey"] { background-color: #14B8A6; } /* Teal */
.legend-color-box[data-color="light-grey"] { background-color: #E879F9; } /* Bright Pink-Purple */
.legend-color-box[data-color="white"] { background-color: #FFFFFF; } /* White */
.legend-color-box[data-color="dark-blue"] { background-color: #3B82F6; } /* Bright Blue */


.legend-label-wrapper {
  transition: all 0.2s;
}

.legend-label {
  font-size: 0.65rem; /* SCALED: Was 0.85rem - reduced to match compact theme */
  font-weight: 600; /* SCALED: Was 700 */
  color: #FFFFFF; /* Changed from #CCCCCC for maximum contrast */
  line-height: 1.2; /* Better line spacing */
  transition: all 0.2s;
  border-radius: 2px;
  padding: 1px 2px; /* SCALED: Was 2px 4px - further reduced */
  margin: -1px -2px; /* SCALED: Was -2px -4px */
  display: inline-block;
}

/* Show outline on legend label hover when in edit mode */
.gantt-legend.edit-mode-enabled .legend-label:hover {
  outline: 2px dashed rgba(80, 175, 123, 0.6);
  outline-offset: 2px;
  background-color: rgba(80, 175, 123, 0.1);
  cursor: text;
}

/* Style for legend label when actively being edited */
.legend-label[contenteditable="true"],
.legend-label.editing {
  outline: 2px solid #50AF7B;
  outline-offset: 2px;
  background-color: rgba(80, 175, 123, 0.1);
  cursor: text;
}

.legend-label[contenteditable="true"]:focus,
.legend-label.editing:focus {
  outline: 2px solid #3C8D62;
  background-color: rgba(80, 175, 123, 0.15);
}

/* ------------------------------------------------------------------- */
/* --- SVG FOOTER (Applied by chart-renderer.js) --- */
/* ------------------------------------------------------------------- */
.gantt-footer-svg {
  /* This class is just a container.
     Styles are applied directly via JS.
  */
  width: 100%;
  background-color: transparent;
  margin: 0;
  padding: 0;
}

/* ------------------------------------------------------------------- */
/* --- PHASE 5: DRAG-TO-EDIT STYLES --- */
/* ------------------------------------------------------------------- */

/* Draggable bars: Add visual feedback */
.gantt-bar[draggable="true"] {
  cursor: move !important;
  transition: opacity 0.2s ease, transform 0.2s ease;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Bar being dragged */
.gantt-bar.dragging {
  opacity: 0.5;
  transform: scale(1.02);
  z-index: 1000;
}

/* Time cells during drag */
.gantt-time-cell.drag-over {
  background-color: rgba(186, 57, 48, 0.1) !important;
  transition: background-color 0.15s ease;
}

/* Drag indicator (floating notification) */
.drag-indicator {
  animation: fadeInDown 0.3s ease;
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Hover effect for draggable bars */
.gantt-bar[draggable="true"]:hover {
  filter: brightness(1.1);
  transform: scale(1.01);
}

/* Prevent text selection during drag */
body.dragging {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Phase 1: Visual feedback for drop zones */
.gantt-bar-area.valid-drop-zone {
  background-color: rgba(80, 175, 123, 0.15) !important; /* Green tint for valid drop */
  outline: 2px dashed rgba(80, 175, 123, 0.5);
  outline-offset: -2px;
  transition: background-color 0.15s ease, outline 0.15s ease;
}

.gantt-bar-area.invalid-drop-zone {
  background-color: rgba(186, 57, 48, 0.15) !important; /* Red tint for invalid drop */
  outline: 2px dashed rgba(186, 57, 48, 0.5);
  outline-offset: -2px;
  transition: background-color 0.15s ease, outline 0.15s ease;
}

/* ------------------------------------------------------------------- */
/* --- PHASE 5: CONTEXT MENU STYLES --- */
/* ------------------------------------------------------------------- */

.context-menu {
  position: absolute;
  background-color: #1A1A1A;
  border: 1px solid #383838;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  min-width: 200px;
  z-index: 10000;
  display: none;
  overflow: hidden;
}

.context-menu-title {
  padding: 12px 16px;
  font-size: 14px;
  font-weight: 600;
  color: #FFFFFF;
  background-color: #0c2340;
  border-bottom: 1px solid #383838;
}

.color-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  cursor: pointer;
  transition: background-color 0.2s;
  color: #FFFFFF;
}

.color-option:hover {
  background-color: #546579;
}

.color-preview {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  flex-shrink: 0;
}

.color-label {
  font-size: 14px;
  color: #CCCCCC;
}

.color-option:hover .color-label {
  color: #FFFFFF;
}

/* --- BANKING ENHANCEMENT: COMPETITIVE INTELLIGENCE CARD --- */
.intel-card.competitive {
  background: linear-gradient(135deg, #1a2a3a 0%, #1f2937 100%);
  border-left: 4px solid #3B82F6;
}

.competitive-content {
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.competitive-section {
  padding: 12px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 6px;
}

.competitive-section strong {
  display: block;
  color: #60A5FA;
  margin-bottom: 8px;
  font-size: 14px;
}

.competitive-section p {
  margin: 0;
  color: #E5E7EB;
  line-height: 1.6;
}

.competitor-list {
  list-style: none;
  padding: 0;
  margin: 8px 0 0 0;
}

.competitor-list li {
  padding: 6px 0 6px 20px;
  position: relative;
  color: #D1D5DB;
}

.competitor-list li:before {
  content: "▸";
  position: absolute;
  left: 0;
  color: #60A5FA;
  font-weight: bold;
}

.competitive-section.advantage-highlight {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

.competitive-section.market-window {
  background: rgba(245, 158, 11, 0.1);
  border-left: 3px solid #F59E0B;
}

/* --- BANKING ENHANCEMENT: INDUSTRY BENCHMARKS CARD --- */
.intel-card.benchmarks {
  background: linear-gradient(135deg, #1e293b 0%, #1f2937 100%);
  border-left: 4px solid #10B981;
}

.benchmarks-content {
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.benchmark-item {
  padding: 16px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.benchmark-label {
  font-size: 14px;
  font-weight: 600;
  color: #10B981;
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.benchmark-comparison {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
  margin-bottom: 10px;
  font-size: 14px;
}

.your-value {
  color: #FFFFFF;
  font-weight: 600;
}

.industry-value {
  color: #9CA3AF;
}

.variance {
  padding: 4px 10px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.variance.positive {
  background: rgba(16, 185, 129, 0.2);
  color: #10B981;
  border: 1px solid rgba(16, 185, 129, 0.3);
}

.benchmark-insight {
  margin-top: 8px;
  padding-top: 12px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  color: #D1D5DB;
  font-size: 13px;
  line-height: 1.5;
  font-style: italic;
}

.benchmark-value {
  color: #E5E7EB;
  font-size: 14px;
  margin-bottom: 8px;
}

/* Responsive Design */
@media (max-width: 1024px) {
  .intelligence-grid {
    grid-template-columns: 1fr;
  }

  .insight-card {
    min-width: 250px;
  }
}

@media (max-width: 768px) {
  .summary-title {
    font-size: 48px;
  }

  .summary-title .icon {
    font-size: 54px;
  }

  .elevator-pitch {
    font-size: 26px;
  }

  .value-proposition {
    font-size: 26px;
  }

  .intel-card h3 {
    font-size: 33px;
  }

  .value-metrics {
    flex-direction: column;
    gap: 8px;
  }

  .insights-carousel {
    flex-direction: column;
  }

  .insight-card {
    min-width: 100%;
    max-width: 100%;
  }
}

/* --- ACCESSIBILITY & PERFORMANCE: MOBILE/TABLET RESPONSIVE DESIGN --- */

/* Tablets and smaller devices */
@media (max-width: 1024px) {
  /* Touch-friendly button sizes (WCAG 2.1 AA: minimum 44x44px) */
  /* SCALED: Compact sizing for tablets */
  .export-container button {
    min-width: 32px; /* SCALED: Was 36px */
    min-height: 32px; /* SCALED: Was 36px */
    padding: 5px 12px; /* SCALED: Was 8px 20px - reduced */
  }

  /* Stack export buttons vertically on tablets */
  .export-container {
    flex-direction: column;
    align-items: stretch;
    gap: 5px; /* SCALED: Was 10px - reduced */
    padding: 6px 8px; /* SCALED: Was 14px 12px - reduced */
  }

  /* Legend spacing reduction */
  .gantt-legend {
    padding: 6px 10px; /* SCALED: Was 12px 16px - reduced */
  }

  .legend-list {
    gap: 8px; /* SCALED: Was 12px - reduced */
  }
}

/* Mobile devices */
@media (max-width: 768px) {
  /* SCALED: Compact sizing for mobile */
  .export-container button {
    min-height: 28px; /* SCALED: Was 40px - reduced */
    padding: 5px 10px; /* SCALED: Was 10px 16px - reduced */
  }

  /* Gantt chart adjustments */
  .gantt-title {
    padding: 6px; /* SCALED: Was 10px - reduced */
  }

  /* Reduce bar height for better mobile display */
  .gantt-bar {
    height: 8px; /* SCALED: Was 12px - reduced (base is now 10px) */
    margin: 2px 1px; /* SCALED: Was 3px 2px - reduced */
  }

  /* Legend adjustments */
  .gantt-legend {
    padding: 6px 8px; /* SCALED: Was 10px 12px - reduced */
  }

  .legend-color-box {
    width: 10px; /* SCALED: Was 16px - reduced (base is now 12px) */
    height: 10px; /* SCALED: Was 16px - reduced */
  }

  /* Modal adjustments for mobile */
  .modal-content {
    width: 95%;
    max-width: 95%;
    margin: 20px auto;
    padding: 12px; /* SCALED: Was 16px - reduced */
  }
}

/* Small mobile devices */
@media (max-width: 480px) {
  /* SCALED: Compact sizing for small mobile */
  .gantt-title {
    padding: 4px; /* SCALED: Was 8px - reduced */
  }

  .export-container button {
    padding: 4px 10px; /* SCALED: Was 8px 14px - reduced */
  }

  /* Simplify legend on very small screens */
  .legend-list {
    flex-direction: column;
    gap: 4px; /* SCALED: Was 6px - reduced */
  }

  .legend-item {
    width: 100%;
  }

  /* Modal takes full width on small mobile */
  .modal-content {
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    margin: 0;
    border-radius: 0;
  }
}

/* Landscape orientation adjustments */
@media (max-width: 768px) and (orientation: landscape) {
  /* Reduce vertical padding in landscape to save space */
  .gantt-title {
    padding: 6px; /* SCALED: Was 12px - reduced */
  }

  .export-container {
    flex-direction: row;
    flex-wrap: wrap;
    padding: 6px; /* SCALED: Was 12px - reduced */
  }

  .export-container button {
    flex: 1 1 calc(50% - 8px);
    min-width: 140px;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  /* Increase contrast for better visibility */
  button:focus,
  a:focus {
    outline-width: 4px;
  }

  .gantt-bar {
    border: 2px solid white;
  }

  .gantt-grid {
    border: 2px solid white;
  }
}

/* Reduced motion support for users with motion sensitivity */
@media (prefers-reduced-motion: reduce) {
  /* Disable animations for users who prefer reduced motion */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

}

/* ===================================================================
   PHASE 3: ENHANCED EXPORT CAPABILITIES
   Export Dropdown and Progress Indicators
   =================================================================== */

/* Export Dropdown Container */
.export-dropdown-container {
  position: relative;
  display: inline-block;
}

/* Export Dropdown Button */
.export-dropdown-container .viewer-btn {
  display: flex;
  align-items: center;
  gap: 8px;
}

.dropdown-arrow {
  font-size: 0.75rem;
  transition: transform 0.2s ease;
}

.export-dropdown-container .viewer-btn.active .dropdown-arrow {
  transform: rotate(180deg);
}

/* Export Dropdown Menu */
.export-dropdown-menu {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  min-width: 240px;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.2s ease;
}

.export-dropdown-menu.open {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

/* Export Dropdown Item */
.export-dropdown-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  cursor: pointer;
  transition: all 0.2s;
  color: #e5e7eb;
  font-size: 0.875rem;
  font-weight: 500;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.export-dropdown-item:last-child {
  border-bottom: none;
}

.export-dropdown-item:hover {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(37, 99, 235, 0.2) 100%);
  padding-left: 20px;
}

.export-dropdown-item:first-child {
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
}

.export-dropdown-item:last-child {
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
}

.export-item-icon {
  font-size: 1.25rem;
  flex-shrink: 0;
}

/* Export Progress Modal */
.export-progress-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.75);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  animation: fadeIn 0.2s ease;
}

.export-progress-content {
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  border: 2px solid rgba(59, 130, 246, 0.4);
  border-radius: 16px;
  padding: 2rem 2.5rem;
  min-width: 400px;
  max-width: 500px;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
}

/* Export Progress Spinner */
.export-progress-spinner {
  width: 60px;
  height: 60px;
  border: 4px solid rgba(59, 130, 246, 0.2);
  border-top: 4px solid #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Export Progress Message */
.export-progress-message {
  font-size: 1rem;
  font-weight: 600;
  color: #e5e7eb;
  text-align: center;
}

/* Export Progress Bar */
.export-progress-bar {
  width: 100%;
  height: 8px;
  background-color: rgba(59, 130, 246, 0.2);
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}

.export-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);
  border-radius: 4px;
  transition: width 0.3s ease;
  box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
}

/* Export Progress Percent */
.export-progress-percent {
  font-size: 1.5rem;
  font-weight: 700;
  color: #3b82f6;
  font-variant-numeric: tabular-nums;
}

/* Responsive */
@media (max-width: 768px) {
  .export-dropdown-menu {
    right: auto;
    left: 0;
    min-width: 220px;
  }

  .export-progress-content {
    min-width: 300px;
    padding: 1.5rem 2rem;
  }

  .export-progress-spinner {
    width: 48px;
    height: 48px;
  }

  .export-item-icon {
    font-size: 1rem;
  }
}

/* ===========================================
   RESEARCH ANALYSIS SECTION
   Shows topic fitness ratings and recommendations
   Collapsible panel below the Gantt chart
   =========================================== */

.research-analysis-wrapper {
  margin-top: 16px; /* SCALED: Was 32px */
  font-family: 'Work Sans', sans-serif;
  border-radius: 6px; /* SCALED: Was 8px */
  overflow: hidden;
  border: 1px solid #d0d0d0;
  background: #f8f9fa;
}

/* Collapsible header - always visible */
.research-analysis-collapse-header {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 10px 14px; /* SCALED: Was 14px 20px */
  background: linear-gradient(to right, #e8ecef, #f4f6f7);
  border: none;
  cursor: pointer;
  font-family: 'Work Sans', sans-serif;
  font-size: 0.95rem;
  color: #0c2340;
  transition: background 0.2s ease;
  gap: 8px; /* SCALED: Was 12px */
}

.research-analysis-collapse-header:hover {
  background: linear-gradient(to right, #dde3e7, #eef1f3);
}

.research-analysis-collapse-header:focus {
  outline: 3px solid #50AF7B;
  outline-offset: -3px;
}

.research-analysis-collapse-header .collapse-icon {
  font-size: 0.95rem; /* Normalized to match all text on screen */
  transition: transform 0.2s ease;
  color: #666;
}

.research-analysis-collapse-header.expanded .collapse-icon {
  transform: rotate(90deg);
}

.research-analysis-collapse-header .collapse-title {
  font-weight: 600;
  flex: 1;
  text-align: left;
}

.research-analysis-collapse-header .collapse-score {
  font-weight: 600;
  padding: 4px 12px;
  border-radius: 4px;
  font-size: 0.95rem; /* Normalized to match all text on screen */
}

/* Collapsible content */
.research-analysis-content {
  padding: 14px 16px; /* SCALED: Was 20px 24px */
  background: #fff;
  max-height: 2000px;
  overflow: hidden;
  transition: max-height 0.3s ease, padding 0.3s ease, opacity 0.2s ease;
  opacity: 1;
}

.research-analysis-content.collapsed {
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
  opacity: 0;
}

.research-analysis-summary {
  font-size: 0.95rem;
  color: #444;
  line-height: 1.6;
  margin-bottom: 14px; /* SCALED: Was 20px */
  padding: 8px 12px; /* SCALED: Was 12px 16px */
  background: #f8f9fa;
  border-radius: 4px; /* SCALED: Was 6px */
  border-left: 3px solid #0c2340; /* SCALED: Was 4px */
}

.research-analysis-table-container {
  overflow-x: auto;
  margin-bottom: 20px;
}

.research-analysis-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95rem; /* Normalized to match all text on screen */
  background: #fff;
  border-radius: 4px; /* SCALED: Was 6px */
  overflow: hidden;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); /* SCALED: Was 0 1px 3px */
}

.research-analysis-table thead {
  background: #0c2340;
  color: #fff;
}

.research-analysis-table th {
  padding: 8px 12px; /* SCALED: Was 12px 16px */
  text-align: left;
  font-weight: 600;
  white-space: nowrap;
}

.research-analysis-table td {
  padding: 8px 12px; /* SCALED: Was 12px 16px */
  border-bottom: 1px solid #e0e0e0;
  vertical-align: top;
}

.research-analysis-table tbody tr:last-child td {
  border-bottom: none;
}

.research-analysis-table tbody tr:hover {
  background: #f5f5f5;
}

.research-analysis-table .topic-name {
  font-weight: 500;
  color: #0c2340;
  min-width: 150px;
}

.research-analysis-table .topic-score {
  text-align: center;
}

.research-analysis-table .topic-task-count {
  text-align: center;
  font-weight: 500;
}

.research-analysis-table .topic-included {
  text-align: center;
  font-weight: 500;
}

.research-analysis-table .topic-included.included-yes {
  color: #50AF7B;
}

.research-analysis-table .topic-included.included-no {
  color: #BA3930;
}

.research-analysis-table .topic-issues ul {
  margin: 0;
  padding-left: 16px;
  list-style-type: disc;
}

.research-analysis-table .topic-issues li {
  margin-bottom: 4px;
  color: #666;
}

.research-analysis-table .topic-recommendation {
  color: #444;
  font-style: italic;
  min-width: 200px;
}

/* Score badges */
.score-badge {
  display: inline-block;
  padding: 3px 8px; /* SCALED: Was 4px 10px */
  border-radius: 3px; /* SCALED: Was 4px */
  font-weight: 600;
  font-size: 0.95rem; /* Normalized to match all text on screen */
  text-align: center;
  min-width: 40px; /* SCALED: Was 50px */
}

.score-excellent {
  background: #d4edda;
  color: #155724;
}

.score-good {
  background: #d1ecf1;
  color: #0c5460;
}

.score-adequate {
  background: #fff3cd;
  color: #856404;
}

.score-poor {
  background: #ffe5d5;
  color: #8a4500;
}

.score-inadequate {
  background: #f8d7da;
  color: #721c24;
}

/* Score legend */
.research-analysis-legend {
  margin-top: 12px; /* SCALED: Was 16px */
  padding: 8px 12px; /* SCALED: Was 12px 16px */
  background: #fff;
  border-radius: 4px; /* SCALED: Was 6px */
  border: 1px solid #e0e0e0;
}

.research-analysis-legend .legend-title {
  font-weight: 600;
  color: #0c2340;
  margin-bottom: 8px;
  font-size: 0.95rem; /* Normalized to match all text on screen */
}

.research-analysis-legend .legend-items {
  display: flex;
  flex-wrap: wrap;
  gap: 10px; /* SCALED: Was 16px */
}

.research-analysis-legend .legend-item {
  display: flex;
  align-items: center;
  gap: 4px; /* SCALED: Was 6px */
  font-size: 0.95rem; /* Normalized to match all text on screen */
  color: #666;
}

.research-analysis-legend .legend-item .score-badge {
  padding: 1px 6px; /* SCALED: Was 2px 8px */
  font-size: 0.95rem; /* Normalized to match all text on screen */
  min-width: 32px; /* SCALED: Was 40px */
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .research-analysis-wrapper {
    margin-top: 12px; /* SCALED: Was 24px */
  }

  .research-analysis-collapse-header {
    padding: 8px 12px; /* SCALED: Was 12px 16px */
    flex-wrap: wrap;
  }

  .research-analysis-content {
    padding: 10px 12px; /* SCALED: Was 16px */
  }

  .research-analysis-table {
    font-size: 0.95rem; /* Keep normalized */
  }

  .research-analysis-table th,
  .research-analysis-table td {
    padding: 6px 8px; /* SCALED: Was 8px 12px */
  }

  .research-analysis-legend .legend-items {
    flex-direction: column;
    gap: 6px; /* SCALED: Was 8px */
  }
}

/* ============================================================================
   RESEARCH ANALYSIS VIEW - Standalone Component Styles
   ============================================================================ */

.research-analysis-view {
  max-width: 1200px;
  margin: 0 auto;
  padding: 24px;
  font-family: var(--font-family, system-ui, -apple-system, sans-serif);
}

/* Header Section */
.analysis-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 32px;
  padding-bottom: 24px;
  border-bottom: 2px solid #e5e7eb;
  flex-wrap: wrap;
  gap: 16px;
}

.analysis-title-section {
  flex: 1;
  min-width: 250px;
}

.analysis-title {
  font-size: 2rem;
  font-weight: 700;
  color: #1f2937;
  margin: 0 0 8px 0;
}

.analysis-timestamp {
  font-size: 0.875rem;
  color: #6b7280;
}

.analysis-score-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.score-label {
  font-size: 0.875rem;
  color: #6b7280;
  text-align: center;
}

/* Score Badges */
.score-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  font-weight: 600;
  color: white;
}

.score-badge.size-large {
  padding: 16px 24px;
  font-size: 2rem;
  border-radius: 12px;
}

.score-badge.size-medium {
  padding: 8px 16px;
  font-size: 1.25rem;
}

.score-badge.size-small {
  padding: 4px 10px;
  font-size: 0.875rem;
}

.score-badge .score-value {
  font-weight: 700;
}

.score-badge .score-max {
  opacity: 0.8;
  font-weight: 400;
}

.score-badge.score-excellent { background: linear-gradient(135deg, #22c55e, #16a34a); }
.score-badge.score-good { background: linear-gradient(135deg, #84cc16, #65a30d); }
.score-badge.score-adequate { background: linear-gradient(135deg, #eab308, #ca8a04); }
.score-badge.score-poor { background: linear-gradient(135deg, #f97316, #ea580c); }
.score-badge.score-inadequate { background: linear-gradient(135deg, #ef4444, #dc2626); }

/* Sections */
.analysis-section {
  margin-bottom: 32px;
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.section-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1f2937;
  margin: 0 0 16px 0;
  padding-bottom: 12px;
  border-bottom: 1px solid #e5e7eb;
}

.subsection-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: #374151;
  margin: 16px 0 12px 0;
}

/* Summary Section */
.summary-text {
  font-size: 1.125rem;
  line-height: 1.7;
  color: #4b5563;
  margin: 0 0 16px 0;
}

.key-findings-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.key-findings-list li {
  position: relative;
  padding: 8px 0 8px 24px;
  color: #374151;
  line-height: 1.6;
}

.key-findings-list li::before {
  content: "•";
  position: absolute;
  left: 8px;
  color: #3b82f6;
  font-weight: bold;
}

/* Gantt Readiness Section */
.readiness-verdict {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  border-radius: 10px;
  margin-bottom: 24px;
  font-size: 1.125rem;
  font-weight: 500;
}

.readiness-verdict.verdict-ready {
  background: #dcfce7;
  color: #166534;
  border: 1px solid #86efac;
}

.readiness-verdict.verdict-needs-improvement {
  background: #fef3c7;
  color: #92400e;
  border: 1px solid #fcd34d;
}

.readiness-verdict.verdict-insufficient {
  background: #fee2e2;
  color: #991b1b;
  border: 1px solid #fca5a5;
}

.verdict-icon {
  font-size: 1.5rem;
}

.readiness-stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 16px;
}

.stat-card {
  background: #f9fafb;
  border-radius: 8px;
  padding: 16px;
  text-align: center;
  border: 1px solid #e5e7eb;
}

.stat-value {
  font-size: 1.75rem;
  font-weight: 700;
  color: #1f2937;
}

.stat-label {
  font-size: 0.875rem;
  color: #6b7280;
  margin-top: 4px;
}

/* Critical Gaps Alert */
.critical-gaps-alert {
  background: #fef2f2;
  border: 1px solid #fecaca;
  border-radius: 10px;
  padding: 16px;
}

.alert-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  color: #991b1b;
  margin-bottom: 12px;
}

.alert-icon {
  font-size: 1.25rem;
}

.gaps-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.gaps-list li {
  padding: 8px 0 8px 24px;
  position: relative;
  color: #7f1d1d;
  line-height: 1.5;
}

.gaps-list li::before {
  content: "!";
  position: absolute;
  left: 4px;
  font-weight: bold;
  color: #dc2626;
}

/* Theme Cards */
.themes-container {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.theme-card {
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  overflow: hidden;
  background: white;
}

.theme-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 16px;
  background: #f9fafb;
  border: none;
  cursor: pointer;
  text-align: left;
  transition: background-color 0.15s;
}

.theme-card-header:hover {
  background: #f3f4f6;
}

.theme-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.expand-icon {
  font-size: 0.75rem;
  color: #6b7280;
  transition: transform 0.2s;
}

.theme-name {
  font-size: 1.125rem;
  font-weight: 600;
  color: #1f2937;
}

.theme-header-right {
  display: flex;
  align-items: center;
  gap: 12px;
}

.inclusion-badge {
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 500;
}

.inclusion-badge.included {
  background: #dcfce7;
  color: #166534;
}

.inclusion-badge.excluded {
  background: #f3f4f6;
  color: #6b7280;
}

.theme-card-content {
  padding: 20px;
  border-top: 1px solid #e5e7eb;
  transition: max-height 0.3s ease, opacity 0.3s ease;
}

.theme-card-content.collapsed {
  display: none;
}

.theme-description {
  color: #4b5563;
  line-height: 1.6;
  margin: 0 0 16px 0;
}

.theme-stats-row {
  display: flex;
  flex-wrap: wrap;
  gap: 24px;
  margin-bottom: 16px;
  padding: 12px 16px;
  background: #f9fafb;
  border-radius: 8px;
}

.theme-stats-row .stat {
  color: #6b7280;
  font-size: 0.875rem;
}

.theme-stats-row .stat strong {
  color: #1f2937;
}

/* List Sections in Theme Cards */
.list-section {
  margin-bottom: 16px;
}

.list-title {
  font-size: 0.875rem;
  font-weight: 600;
  color: #6b7280;
  margin: 0 0 8px 0;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.list-items {
  list-style: none;
  padding: 0;
  margin: 0;
}

.list-items li {
  padding: 6px 0 6px 20px;
  position: relative;
  color: #4b5563;
  line-height: 1.5;
}

.list-strengths .list-items li::before {
  content: "✓";
  position: absolute;
  left: 0;
  color: #22c55e;
}

.list-gaps .list-items li::before {
  content: "✗";
  position: absolute;
  left: 0;
  color: #ef4444;
}

.list-recommendations .list-items li::before {
  content: "→";
  position: absolute;
  left: 0;
  color: #3b82f6;
}

/* Sample Events Table */
.sample-events-container {
  margin-top: 16px;
}

.events-title {
  font-size: 0.875rem;
  font-weight: 600;
  color: #6b7280;
  margin: 0 0 12px 0;
}

.sample-events-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
}

.sample-events-table th,
.sample-events-table td {
  padding: 10px 12px;
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
}

.sample-events-table th {
  background: #f9fafb;
  font-weight: 600;
  color: #374151;
}

.quality-badge {
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
}

.quality-badge.quality-specific { background: #dcfce7; color: #166534; }
.quality-badge.quality-approximate { background: #fef3c7; color: #92400e; }
.quality-badge.quality-vague { background: #fed7aa; color: #9a3412; }
.quality-badge.quality-missing { background: #fee2e2; color: #991b1b; }

/* Data Completeness Section */
.completeness-metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

.metric-card {
  background: #f9fafb;
  border-radius: 8px;
  padding: 16px;
  text-align: center;
  border: 1px solid #e5e7eb;
}

.metric-value {
  font-size: 2rem;
  font-weight: 700;
  color: #3b82f6;
}

.metric-label {
  font-size: 0.75rem;
  color: #6b7280;
  margin-top: 4px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Date Specificity Chart */
.date-specificity-chart {
  margin-top: 24px;
}

.chart-title {
  font-size: 1rem;
  font-weight: 600;
  color: #374151;
  margin: 0 0 16px 0;
}

.chart-bars {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.bar-container {
  display: grid;
  grid-template-columns: 100px 1fr 80px;
  align-items: center;
  gap: 12px;
}

.bar-label {
  font-size: 0.875rem;
  color: #4b5563;
}

.bar-track {
  height: 24px;
  background: #f3f4f6;
  border-radius: 4px;
  overflow: hidden;
}

.bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s ease;
}

.bar-value {
  font-size: 0.875rem;
  color: #6b7280;
  text-align: right;
}

.timeline-span-info {
  margin-top: 16px;
  padding: 12px 16px;
  background: #f3f4f6;
  border-radius: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

.timeline-label {
  font-weight: 600;
  color: #374151;
}

.timeline-value {
  color: #4b5563;
}

.timeline-range {
  color: #9ca3af;
  font-size: 0.875rem;
}

/* Action Items Section */
.action-items-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.action-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 16px;
  background: #f9fafb;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
  gap: 16px;
}

.action-content {
  flex: 1;
}

.action-text {
  color: #374151;
  line-height: 1.5;
}

.action-badges {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.impact-badge, .effort-badge {
  padding: 4px 10px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: capitalize;
}

.impact-badge.impact-high { background: #dcfce7; color: #166534; }
.impact-badge.impact-medium { background: #fef3c7; color: #92400e; }
.impact-badge.impact-low { background: #f3f4f6; color: #6b7280; }

.effort-badge.effort-low { background: #dcfce7; color: #166534; }
.effort-badge.effort-medium { background: #fef3c7; color: #92400e; }
.effort-badge.effort-high { background: #fee2e2; color: #991b1b; }

/* Suggested Sources Section */
.sources-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.source-item {
  padding: 16px;
  background: #f9fafb;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.source-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.source-type {
  font-weight: 600;
  color: #1f2937;
}

.priority-badge {
  padding: 4px 10px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: capitalize;
}

.priority-badge.priority-high { background: #fee2e2; color: #991b1b; }
.priority-badge.priority-medium { background: #fef3c7; color: #92400e; }
.priority-badge.priority-low { background: #f3f4f6; color: #6b7280; }

.source-reason {
  color: #4b5563;
  line-height: 1.5;
  margin-bottom: 8px;
}

.source-improvement {
  color: #6b7280;
  font-size: 0.875rem;
}

/* Empty State */
.analysis-empty-state {
  text-align: center;
  padding: 64px 24px;
  color: #6b7280;
}

.empty-state-icon {
  font-size: 4rem;
  margin-bottom: 16px;
}

.analysis-empty-state h2 {
  color: #374151;
  margin: 0 0 12px 0;
}

.analysis-empty-state p {
  margin: 0 0 8px 0;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .research-analysis-view {
    padding: 16px;
  }

  .analysis-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .analysis-score-section {
    align-items: flex-start;
  }

  .analysis-title {
    font-size: 1.5rem;
  }

  .score-badge.size-large {
    padding: 12px 20px;
    font-size: 1.5rem;
  }

  .analysis-section {
    padding: 16px;
  }

  .section-title {
    font-size: 1.25rem;
  }

  .theme-card-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .theme-header-right {
    width: 100%;
    justify-content: space-between;
  }

  .bar-container {
    grid-template-columns: 80px 1fr 60px;
  }

  .action-item {
    flex-direction: column;
  }

  .action-badges {
    width: 100%;
    justify-content: flex-start;
  }
}

